import{w as a}from"./index-ZjP4CjeZ-C2-Wxc_X.js";import{d as u,p as f}from"./iframe-Csm4GGMy.js";import"./preload-helper-PPVm8Dsz.js";const p=()=>u.get("experimentalCloseWatcher",!1)&&a!==void 0&&"CloseWatcher"in a,E=()=>{document.addEventListener("backbutton",()=>{})},m=()=>{const c=document;let r=!1;const s=()=>{if(r)return;let o=0,n=[];const l=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(t,e){n.push({priority:t,handler:e,id:o++})}}});c.dispatchEvent(l);const d=async t=>{try{if(t?.handler){const e=t.handler(i);e!=null&&await e}}catch(e){f("[ion-app] - Exception in startHardwareBackButton:",e)}},i=()=>{if(n.length>0){let t={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};n.forEach(e=>{e.priority>=t.priority&&(t=e)}),r=!0,n=n.filter(e=>e.id!==t.id),d(t).then(()=>r=!1)}};i()};if(p()){let o;const n=()=>{o?.destroy(),o=new a.CloseWatcher,o.onclose=()=>{s(),n()}};n()}else c.addEventListener("backbutton",s)},k=100,v=99;export{v as MENU_BACK_BUTTON_PRIORITY,k as OVERLAY_BACK_BUTTON_PRIORITY,E as blockHardwareBackButton,p as shouldUseCloseWatcher,m as startHardwareBackButton};
