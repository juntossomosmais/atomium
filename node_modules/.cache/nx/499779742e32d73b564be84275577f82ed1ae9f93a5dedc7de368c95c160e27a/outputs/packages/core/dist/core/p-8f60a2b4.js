import{g as t,c as n,a as o}from"./p-cdbbf104.js";import{a as s,b as e,r as i,d as c}from"./p-0c75f9f6.js";import{w as r}from"./p-3b0213f5.js";import"./p-1665515a.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var a;(function(t){t["Body"]="body";t["Ionic"]="ionic";t["Native"]="native";t["None"]="none"})(a||(a={}));const f={getEngine(){var t;return((t=r===null||r===void 0?void 0:r.Capacitor)===null||t===void 0?void 0:t.isPluginAvailable("Keyboard"))&&(r===null||r===void 0?void 0:r.Capacitor.Plugins.Keyboard)},getResizeMode(){const t=this.getEngine();if(!t||!t.getResizeMode){return Promise.resolve(undefined)}return t.getResizeMode()}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const u=new WeakMap;const l=(t,n,o,s=0,e=false)=>{if(u.has(t)===o){return}if(o){w(t,n,s,e)}else{p(t,n)}};const d=t=>t===t.getRootNode().activeElement;const w=(t,n,o,s=false)=>{const e=n.parentNode;const i=n.cloneNode(false);i.classList.add("cloned-input");i.tabIndex=-1;if(s){i.disabled=true}e.appendChild(i);u.set(t,i);const c=t.ownerDocument;const r=c.dir==="rtl"?9999:-9999;t.style.pointerEvents="none";n.style.transform=`translate3d(${r}px,${o}px,0) scale(0)`};const p=(t,n)=>{const o=u.get(t);if(o){u.delete(t);o.remove()}t.style.pointerEvents="";n.style.transform=""};const m=50;
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const b=(t,n,o)=>{if(!o||!n){return()=>{}}const i=o=>{if(d(n)){l(t,n,o)}};const c=()=>l(t,n,false);const r=()=>i(true);const a=()=>i(false);s(o,"ionScrollStart",r);s(o,"ionScrollEnd",a);n.addEventListener("blur",c);return()=>{e(o,"ionScrollStart",r);e(o,"ionScrollEnd",a);n.removeEventListener("blur",c)}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const h="input, textarea, [no-blur], [contenteditable]";const y=()=>{let t=true;let n=false;const o=document;const i=()=>{n=true};const c=()=>{t=true};const r=s=>{if(n){n=false;return}const e=o.activeElement;if(!e){return}if(e.matches(h)){return}const i=s.target;if(i===e){return}if(i.matches(h)||i.closest(h)){return}t=false;setTimeout((()=>{if(!t){e.blur()}}),50)};s(o,"ionScrollStart",i);o.addEventListener("focusin",c,true);o.addEventListener("touchend",r,false);return()=>{e(o,"ionScrollStart",i,true);o.removeEventListener("focusin",c,true);o.removeEventListener("touchend",r,false)}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const S=.3;const v=(t,n,o)=>{var s;const e=(s=t.closest("ion-item,[ion-item]"))!==null&&s!==void 0?s:t;return M(e.getBoundingClientRect(),n.getBoundingClientRect(),o,t.ownerDocument.defaultView.innerHeight)};const M=(t,n,o,s)=>{const e=t.top;const i=t.bottom;const c=n.top;const r=Math.min(n.bottom,s-o);const a=c+15;const f=r-m;const u=f-i;const l=a-e;const d=Math.round(u<0?-u:l>0?-l:0);const w=Math.min(d,e-c);const p=Math.abs(w);const b=p/S;const h=Math.min(400,Math.max(150,b));return{scrollAmount:w,scrollDuration:h,scrollPadding:o,inputSafeY:-(e-a)+4}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const g="$ionPaddingTimer";const D=(t,n,o)=>{const s=t[g];if(s){clearTimeout(s)}if(n>0){t.style.setProperty("--keyboard-offset",`${n}px`)}else{t[g]=setTimeout((()=>{t.style.setProperty("--keyboard-offset","0px");if(o){o()}}),120)}};const x=(t,n,o)=>{const s=()=>{if(n){D(n,0,o)}};t.addEventListener("focusout",s,{once:true})};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let K=0;const k=(t,n,o,s,e,i,c,r=false)=>{const f=i&&(c===undefined||c.mode===a.None);const u=async()=>{T(t,n,o,s,e,f,r)};t.addEventListener("focusin",u,true);return()=>{t.removeEventListener("focusin",u,true)}};const T=async(o,s,e,c,r,a,f=false)=>{if(!e&&!c){return}const u=v(o,e||c,r);if(e&&Math.abs(u.scrollAmount)<4){s.focus();if(a&&e!==null){K+=u.scrollPadding;D(e,K);x(s,e,(()=>K=0))}return}l(o,s,true,u.inputSafeY,f);s.focus();i((()=>o.click()));if(a&&e){K+=u.scrollPadding;D(e,K)}if(typeof window!=="undefined"){let i;const c=async()=>{if(i!==undefined){clearTimeout(i)}window.removeEventListener("ionKeyboardDidShow",r);window.removeEventListener("ionKeyboardDidShow",c);if(e){await n(e,0,u.scrollAmount,u.scrollDuration)}l(o,s,false,u.inputSafeY);s.focus();if(a){x(s,e,(()=>K=0))}};const r=()=>{window.removeEventListener("ionKeyboardDidShow",r);window.addEventListener("ionKeyboardDidShow",c)};if(e){const n=await t(e);const o=n.scrollHeight-n.clientHeight;if(u.scrollAmount>o-n.scrollTop){if(s.type==="password"){u.scrollAmount+=m;window.addEventListener("ionKeyboardDidShow",r)}else{window.addEventListener("ionKeyboardDidShow",c)}i=setTimeout(c,1e3);return}}c()}};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const P=true;const j=async(t,n)=>{const s=document;const e=n==="ios";const i=n==="android";const r=t.getNumber("keyboardHeight",290);const a=t.getBoolean("scrollAssist",true);const u=t.getBoolean("hideCaretOnScroll",e);const l=t.getBoolean("inputBlurring",e);const d=t.getBoolean("scrollPadding",true);const w=Array.from(s.querySelectorAll("ion-input, ion-textarea"));const p=new WeakMap;const m=new WeakMap;const h=await f.getResizeMode();const S=async t=>{await new Promise((n=>c(t,n)));const n=t.shadowRoot||t;const s=n.querySelector("input")||n.querySelector("textarea");const e=o(t);const f=!e?t.closest("ion-footer"):null;if(!s){return}if(!!e&&u&&!p.has(t)){const n=b(t,s,e);p.set(t,n)}const l=s.type==="date"||s.type==="datetime-local";if(!l&&(!!e||!!f)&&a&&!m.has(t)){const n=k(t,s,e,f,r,d,h,i);m.set(t,n)}};const v=t=>{if(u){const n=p.get(t);if(n){n()}p.delete(t)}if(a){const n=m.get(t);if(n){n()}m.delete(t)}};if(l&&P){y()}for(const t of w){S(t)}s.addEventListener("ionInputDidLoad",(t=>{S(t.detail)}));s.addEventListener("ionInputDidUnload",(t=>{v(t.detail)}))};export{j as startInputShims};
//# sourceMappingURL=p-8f60a2b4.js.map