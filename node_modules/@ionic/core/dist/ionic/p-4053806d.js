/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
import{b as n,c as e}from"./p-bb7f6a2b.js";import{C as o}from"./p-caf3c8ac.js";import{OVERLAY_BACK_BUTTON_PRIORITY as t}from"./p-6561b0e5.js";import{c as i,f as a,a as r,b as s,g as d}from"./p-2e15200d.js";import{p as l}from"./p-e1bc9a81.js";let c=0;const u=new WeakMap,p=n=>({create:e=>k(n,e),dismiss:(e,o,t)=>D(document,e,o,n,t),getTop:async()=>T(document,n)}),m=p("ion-alert"),v=p("ion-action-sheet"),f=p("ion-loading"),h=p("ion-modal"),b=p("ion-picker"),w=p("ion-popover"),y=p("ion-toast"),g=n=>{"undefined"!=typeof document&&C(document);const e=c++;n.overlayIndex=e,n.hasAttribute("id")||(n.id=`ion-overlay-${e}`)},k=(n,e)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(n).then((()=>{const o=document.createElement(n);return o.classList.add("overlay-hidden"),Object.assign(o,Object.assign(Object.assign({},e),{hasController:!0})),E(document).appendChild(o),new Promise((n=>i(o,n)))})):Promise.resolve(),x='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',j=(n,e)=>{let o=n.querySelector(x);const t=null==o?void 0:o.shadowRoot;t&&(o=t.querySelector(x)||o),o?a(o):e.focus()},O=(n,e)=>{const o=Array.from(n.querySelectorAll(x));let t=o.length>0?o[o.length-1]:null;const i=null==t?void 0:t.shadowRoot;i&&(t=i.querySelector(x)||t),t?t.focus():e.focus()},C=n=>{0===c&&(c=1,n.addEventListener("focus",(e=>{((n,e)=>{const o=T(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),t=n.target;o&&t&&(o.classList.contains("ion-disable-focus-trap")||(o.shadowRoot?(()=>{if(o.contains(t))o.lastFocus=t;else{const n=o.lastFocus;j(o,o),n===e.activeElement&&O(o,o),o.lastFocus=e.activeElement}})():(()=>{if(o===t)o.lastFocus=void 0;else{const n=d(o);if(!n.contains(t))return;const i=n.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(t))o.lastFocus=t;else{const n=o.lastFocus;j(i,o),n===e.activeElement&&O(i,o),o.lastFocus=e.activeElement}}})()))})(e,n)}),!0),n.addEventListener("ionBackButton",(e=>{const o=T(n);(null==o?void 0:o.backdropDismiss)&&e.detail.register(t,(()=>o.dismiss(void 0,F)))})),n.addEventListener("keydown",(e=>{if("Escape"===e.key){const e=T(n);(null==e?void 0:e.backdropDismiss)&&e.dismiss(void 0,F)}})))},D=(n,e,o,t,i)=>{const a=T(n,t,i);return a?a.dismiss(e,o):Promise.reject("overlay does not exist")},T=(n,e,o)=>{const t=((n,e)=>(void 0===e&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(n.querySelectorAll(e)).filter((n=>n.overlayIndex>0))))(n,e).filter((n=>!n.classList.contains("overlay-hidden")));return void 0===o?t[t.length-1]:t.find((n=>n.id===o))},A=(n=!1)=>{const e=E(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");e&&(n?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))},P=async(o,t,i,a,r)=>{var s,d;if(o.presented)return;A(!0),o.presented=!0,o.willPresent.emit(),null===(s=o.willPresentShorthand)||void 0===s||s.emit();const l=n(o),c=o.enterAnimation?o.enterAnimation:e.get(t,"ios"===l?i:a);await G(o,c,o.el,r)&&(o.didPresent.emit(),null===(d=o.didPresentShorthand)||void 0===d||d.emit()),"ION-TOAST"!==o.el.tagName&&B(o.el),!o.keyboardClose||null!==document.activeElement&&o.el.contains(document.activeElement)||o.el.focus()},B=async n=>{let e=document.activeElement;if(!e)return;const o=null==e?void 0:e.shadowRoot;o&&(e=o.querySelector(x)||e),await n.onDidDismiss(),e.focus()},M=async(o,t,i,a,r,s,d)=>{var l,c;if(!o.presented)return!1;A(!1),o.presented=!1;try{o.el.style.setProperty("pointer-events","none"),o.willDismiss.emit({data:t,role:i}),null===(l=o.willDismissShorthand)||void 0===l||l.emit({data:t,role:i});const p=n(o),m=o.leaveAnimation?o.leaveAnimation:e.get(a,"ios"===p?r:s);i!==N&&await G(o,m,o.el,d),o.didDismiss.emit({data:t,role:i}),null===(c=o.didDismissShorthand)||void 0===c||c.emit({data:t,role:i}),u.delete(o),o.el.classList.add("overlay-hidden"),o.el.style.removeProperty("pointer-events"),void 0!==o.el.lastFocus&&(o.el.lastFocus=void 0)}catch(n){console.error(n)}return o.el.remove(),!0},E=n=>n.querySelector("ion-app")||n.body,G=async(n,o,t,i)=>{t.classList.remove("overlay-hidden");const a=o(n.el,i);n.animated&&e.getBoolean("animated",!0)||a.duration(0),n.keyboardClose&&a.beforeAddWrite((()=>{const n=t.ownerDocument.activeElement;(null==n?void 0:n.matches("input,ion-input, ion-textarea"))&&n.blur()}));const r=u.get(n)||[];return u.set(n,[...r,a]),await a.play(),!0},I=(n,e)=>{let o;const t=new Promise((n=>o=n));return L(n,e,(n=>{o(n.detail)})),t},L=(n,e,o)=>{const t=i=>{s(n,e,t),o(i)};r(n,e,t)},V=n=>"cancel"===n||n===F,$=n=>n(),z=(n,o)=>{if("function"==typeof n)return e.get("_zoneGate",$)((()=>{try{return n(o)}catch(n){throw n}}))},F="backdrop",N="gesture",S=n=>{let e,t=!1;const i=o(),a=(o=!1)=>{if(e&&!o)return{delegate:e,inline:t};const{el:a,hasController:r,delegate:s}=n;return t=null!==a.parentNode&&!r,e=t?s||i:s,{inline:t,delegate:e}};return{attachViewToDom:async e=>{const{delegate:o}=a(!0);if(o)return await o.attachViewToDom(n.el,e);const{hasController:t}=n;if(t&&void 0!==e)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:e}=a();e&&void 0!==n.el&&e.removeViewFromDom(n.el.parentElement,n.el)}}},W=()=>{let n;const e=()=>{n&&(n(),n=void 0)};return{addClickListener:(o,t)=>{e();const i=void 0!==t?document.getElementById(t):null;i?n=((n,e)=>{const o=()=>{e.present()};return n.addEventListener("click",o),()=>{n.removeEventListener("click",o)}})(i,o):l(`A trigger element with the ID "${t}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,o)},removeClickListener:e}};export{F as B,N as G,m as a,v as b,w as c,S as d,W as e,P as f,M as g,I as h,V as i,g as j,u as k,f as l,h as m,j as n,T as o,b as p,z as s,y as t}