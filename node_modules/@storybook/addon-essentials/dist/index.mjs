import path from"path";import{logger}from"@storybook/node-logger";import{serverRequire}from"@storybook/core-common";var requireMain=configDir=>{let absoluteConfigDir=path.isAbsolute(configDir)?configDir:path.join(process.cwd(),configDir),mainFile=path.join(absoluteConfigDir,"main");return serverRequire(mainFile)??{}};function addons(options){let checkInstalled=(addonName,main2)=>{let addon=`@storybook/addon-${addonName}`,existingAddon=main2.addons?.find(entry=>(typeof entry=="string"?entry:entry.name)?.startsWith(addon));return existingAddon&&logger.info(`Found existing addon ${JSON.stringify(existingAddon)}, skipping.`),!!existingAddon},main=requireMain(options.configDir);return["docs","controls","actions","backgrounds","viewport","toolbars","measure","outline","highlight"].filter(key=>options[key]!==!1).filter(addon=>!checkInstalled(addon,main)).map(addon=>`@storybook/addon-essentials/${addon}`)}export{addons};
